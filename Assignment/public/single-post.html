<!doctype html>

<html lang="en" class="no-js">

<!-- Giao dien duoc chia se mien phi tai www.ptheme.net [Free HTML Download]. SKYPE[ptheme.net] - EMAIL[ptheme.net@gmail.com].-->
<head>
	<title>Thematic</title>

	<meta charset="utf-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href='http://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="css/w3.css" media="screen">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css" media="screen">
	<link rel="stylesheet" type="text/css" href="css/animate.css" media="screen">
	<link rel="stylesheet" type="text/css" href="css/magnific-popup.css" media="screen">
	<link rel="stylesheet" type="text/css" href="css/font-awesome.css" media="screen">
	<link rel="stylesheet" type="text/css" href="css/style.css" media="screen">
	<link rel="stylesheet" type="text/css" href="css/responsive.css" media="screen">
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/jquery.migrate.js"></script>
	<script type="text/javascript" src="js/jquery.appear.js"></script>
	<script type="text/javascript" src="js/jquery.bxslider.min.js"></script>
	<script type="text/javascript" src="js/jquery.magnific-popup.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.js"></script>
    <script type="text/javascript" src="js/jquery.themepunch.plugins.min.js"></script>
    <script type="text/javascript" src="js/jquery.themepunch.revolution.min.js"></script>
	<script type="text/javascript" src="js/jquery.imagesloaded.min.js"></script>
  	<script type="text/javascript" src="js/jquery.isotope.min.js"></script>
  	
	<script type="text/javascript" src="js/gmap3.min.js"></script>
	<script type="text/javascript" src="js/waypoints.js"></script>
	<script type="text/javascript" src="js/plugins-scroll.js"></script>
	
</head>
<body>

	<!-- Container -->
	<div id="container">
		
		<!-- Header
		    ================================================== -->
		<header class="clearfix">
	
		</header>
		<!-- End Header -->

		<!-- blog 
			================================================== -->
		<div class="section">
			<div id="blog-list">
				<div class="pager-title">
					<div class="container">
						<h1>Admin</h1>
						  <button type="button" class="btn btn-default" onclick="logout();">LogOut</button>
					</div>
				</div>
				<div class="container">
					<div class="row">

						
							<div class="blog-box single-post">

								<div class="blog-post">
									<div class="gal-blog">
										<img alt="" src="images/toyata.jpg">
										<div class="hover-blog">
											<a class="zoom" href="images/toyata.hpg"></a>
										</div>							
									</div>
									
								</div>
						
							<form role="form">
									<div class="form-group">
									<label for="email">ID</label>
									<input type="email" class="form-control" id="id">
									</div>
								  <div class="form-group">
									<label for="pwd">Tên sản phẩm</label>
									<input type="text" class="form-control" id="name">
								  </div>
								  <div class="form-group">
									<label for="pwd">Thông tin</label>
									<input type="text" class="form-control" id="info">
								  </div>
								  <div class="form-group">
									<label for="pwd">Gía</label>
									<input type="text" class="form-control" id="price">
								  </div>
								  
						  <div class="form-group">
								
									<input type="file" class="form-control" id="file">
								  </div>
    
  
							  <button type="button" class="btn btn-default" onclick="themdulieu();">Thêm</button>
							</form>
								

							</div>
						<div class="title-section triggerAnimation animated" data-animate="fadeIn">
						<h1>Sản Phẩm</h1>
					
					</div>

						
							<div id="hienthidulieu">
							</div>
					

					</div>
					
				</div>
			</div>
		</div>
		
		<!-- End blog -->


		<!-- footer 
			================================================== -->
		<footer>
			<div class="container">
				<div class="row">
					<div class="col-md-3">
						<a class="footer-logo" href="index-2.html"><img src="images/logo.png" alt=""></a>
					</div>
					<div class="col-md-9">
						<div class="copyright-line">
							<span>Copyright 2013 Thematic | Theme by Nunforest</span>
							<ul class="social-icons">
								<li><a class="facebook" href="#"><i class="fa fa-facebook"></i></a></li>
								<li><a class="twitter" href="#"><i class="fa fa-twitter"></i></a></li>
								<li><a class="rss" href="#"><i class="fa fa-rss"></i></a></li>
								<li><a class="pinterest" href="#"><i class="fa fa-pinterest"></i></a></li>					
								<li><a class="dribble" href="#"><i class="fa fa-dribbble"></i></a></li>					
								<li><a class="google" href="#"><i class="fa fa-google-plus"></i></a></li>					
							</ul>							
						</div>
					</div>
				</div>
			</div>
		</footer>
		<!-- End footer -->
	</div>
	<!-- End Container -->

	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/jquery.migrate.js"></script>
	<script type="text/javascript" src="js/bootstrap.js"></script>
	<script type="text/javascript" src="js/jquery.imagesloaded.min.js"></script>
	<script type="text/javascript" src="js/jquery.magnific-popup.min.js"></script>
	<script type="text/javascript" src="js/waypoints.js"></script>
	<script type="text/javascript" src="js/plugins-scroll.js"></script>
	<script type="text/javascript" src="js/script.js"></script>
	
	<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase-database.js"></script>
	<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>
	<script>
	  //Đồng bộ hóa dữ liệu trên Firebase Google
	  // Initialize Firebase
	  var config = {
		apiKey: "AIzaSyB2ziz9ubUFB6xLVUO76eAUvHWAKXtCHuE",
		authDomain: "assigment-a56a3.firebaseapp.com",
		databaseURL: "https://assigment-a56a3.firebaseio.com",
		storageBucket: "assigment-a56a3.appspot.com",
	  };
	  firebase.initializeApp(config);
	  
	  //Thêm dữ liệu
	  function themdulieu(){
		var id = document.getElementById("id").value;
		var name = document.getElementById("name").value;
		var info = document.getElementById("info").value;
		var price = document.getElementById("price").value;
		
		
		var storageRef = firebase.storage().ref(); 
		var file = document.getElementById("file").files[0]; 
		var metadata = {
	  contentType: 'images/jpeg'
	};

	// Upload file and metadata to the object 'images/mountains.jpg'
	var uploadTask = storageRef.child('images/' + file.name).put(file, metadata);

	// Listen for state changes, errors, and completion of the upload.
	uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, // or 'state_changed'
	  function(snapshot) {
		// Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded
		var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
		console.log('Upload is ' + progress + '% done');
		switch (snapshot.state) {
		  case firebase.storage.TaskState.PAUSED: // or 'paused'
			console.log('Upload is paused');
			break;
		  case firebase.storage.TaskState.RUNNING: // or 'running'
			console.log('Upload is running');
			break;
		}
	  }, function(error) {
	  switch (error.code) {
    case 'storage/unauthorized':
      // User doesn't have permission to access the object
      break;

    case 'storage/canceled':
      // User canceled the upload
      break;

    case 'storage/unknown':
      // Unknown error occurred, inspect error.serverResponse
      break;
  }
}, function() {
  // Upload completed successfully, now we can get the download URL
  var downloadURL = uploadTask.snapshot.downloadURL;
  
  	firebase.database().ref('sanpham').push({
			id: id,
			name: name,
			info : info,
			price: price,
			image: downloadURL
		});
}); 
 
		
	
	  }
	   //Xoa du lieu
	  function deleteData(datakey){ 
   firebase.database().ref('sanpham/'+datakey).remove(); 
   loadItem(); 
} 

	  //Lấy dữ liệu 
	  var commentsRef = firebase.database().ref('sanpham');
	  var list = document.getElementById("hienthidulieu");
	  commentsRef.on('child_added', function(data) {
		//Viết code hiển thị ra giao diện
		list.innerHTML += '<div class="portfolio-container triggerAnimation animated" data-animate="fadeInUp" style="width:100%">'
						+'<div class="work-post animation-filter web">'
						+'<img src="'+data.val().image+'" >'
						+'<div class="hover-box">'
						+'<h2>ID xe :'+data.val().id+'<\h2>'
						+'<h2>Tên xe : '+data.val().name+'<\h2>'
						+'<h2>Thông tin xe :'+data.val().info+'<\h2>'
						+'<h2>Giá tiền :'+data.val().price+'<\h2>'
						+'<a href="#" class="delete" onclick="deleteData(\''+data.key+'\');"><i>X</i></a>'
						+'<a href="images/dev.png" class="zoom"><i class="fa fa-search"></i></a>'
						+'</div>'
						+'</div>'
						+'</div>'
	  });
	  
	
		function loadItem(){ 
	var listload = "";
	 commentsRef.on('child_added', function(data) {
		//Viết code hiển thị ra giao diện
			listload += '<div class="portfolio-container triggerAnimation animated" data-animate="fadeInUp"><div class="work-post animation-filter web">'
						+'<img src="'+data.val().image+'" >'
						+'<div class="hover-box">'
						+'<h2>ID xe :'+data.val().id+'<\h2>'
						+'<h2>Tên xe : '+data.val().name+'<\h2>'
						+'<h2>Thông tin xe :'+data.val().info+'<\h2>'
						+'<h2>Giá tiền :'+data.val().price+'<\h2>'
						+'<a href="#" class="delete" onclick="deleteData(\''+data.key+'\');"><i>X</i></a>'
						+'<a href="images/dev.png" class="zoom"><i class="fa fa-search"></i></a>'
						+'</div>'
						+'</div>'
						+'</div>'
	  });
	list.innerHTML = listload; 		
	}
	
	</script>
		<script>
		function logout(){
			firebase.auth().signOut().then(function() {
			  location = "index.html";
			}, function(error) {
			  // An error happened.
			});
		}
		</script>		

</body>


</html>